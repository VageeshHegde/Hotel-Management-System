<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Booking</title>
    <link rel="website icon" type="png" href="logoHotel4.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="Room_Booking.css">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script>
      window.onpageshow = function(event) {
          if (event.persisted) {
              window.location.reload();
          }
      };
    </script>     
    <style>
        body{
            margin: 0%;
            padding: 0%;
            width: 100%;
            box-sizing: border-box;
            background-size: cover;
        }
        .navbar-brand:hover {
    color: rgb(129, 176, 226); 
  }
    </style>
</head>
<body>
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark d-flex">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><i class="fa-solid fa-house"></i> HOME</a>
          <a class="navbar-brand" href="#about us"><i class="fa-solid fa-people-group"></i> ABOUT US</a>
          <a class="navbar-brand" href="#availability"><i class="fa-solid fa-door-open"></i> ROOMS</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDarkDropdown" aria-controls="navbarNavDarkDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDarkDropdown" style="margin-right: 58px;">
            <ul class="navbar-nav p-2 flex-grow-1 justify-content-end">
              <li class="nav-item dropdown float-end">
                <button class="btn btn-dark dropdown-toggle float-end" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-user"></i> <%= customerName.toUpperCase() %>
                </button>
                <ul class="dropdown-menu dropdown-menu-dark">
                  <li><a class="dropdown-item" href="profile"><i class="fa-solid fa-id-card"></i> Profile</a></li>
                  <li><a class="dropdown-item" href="/logoutg"><i class="fa-solid fa-arrow-right-from-bracket"></i> Log Out</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="Hotel-background.jpg" class="d-block w-100" alt="..." style="width: 100%; height: 600px;">
            <div class="carousel-caption d-none d-md-block">
              <h2>Welcome!</h2>
              <h4>We hope that you enjoy your stay with us.</h4>
            </div>
          </div>
          <div class="carousel-item">
            <img src="Hotel-background2.jpg" class="d-block w-100" alt="..." style="width: 100%; height: 600px;">
            <div class="carousel-caption d-none d-md-block">
              <h2>Stay in Style, Book with Smiles</h2>
              <h4>Choose the perfect room with us.</h4>
            </div>
          </div>
          <div class="carousel-item">
            <img src="Hotel-background3.jpg" class="d-block w-100" alt="..." style="width: 100%; height: 600px;">
            <div class="carousel-caption d-none d-md-block">
              <h2>Unlock Your Perfect Stay</h2>
              <h4>Book Your Stay with Ease: Your Comfort, Our Priority!</h4>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <div class="container">
      <br id="about us">
      <br>
      <br>
    <h3 style="text-align: center;">About Us</h3>
    <div class="d-flex justify-content-center w-100 p-3">
    <div class="card mb-3 shadow-sm p-3 mb-5 bg-body-tertiary rounded">
      <div class="row g-0">
        <div class="col-md-4">
          <img src="aboutUs1.jpg" class="img-fluid rounded-start" alt="..." style="border-radius: 6px;">
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title"><i class="fa-solid fa-bullseye"></i> Our Mission:</h5>
            <p class="card-text">Our mission is simple - to provide our guests with an unforgettable experience. Whether you're here for a romantic getaway, a family vacation, or a business trip, we strive to exceed your expectations in every way possible.</p>
          </div>
        </div>
      </div>
    </div>
    </div>
    <div class="d-flex justify-content-center w-100 p-3">
      <div class="card mb-3 shadow-sm p-3 mb-5 bg-body-tertiary rounded">
        <div class="row g-0">
          <div class="col-md-4">
            <img src="aboutUs2.jpg" class="img-fluid rounded-start" alt="..." style="border-radius: 6px;">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><i class="fa-solid fa-tents"></i> Our Accommodations:</h5>
              <p class="card-text">From our elegant rooms and suites to our luxurious amenities, every aspect of our hotel is designed to provide you with the utmost comfort and convenience. Relax in style and enjoy breathtaking views of the city from your private balcony, or unwind in our spa and wellness center after a long day of sightseeing.</p>
            </div>
          </div>
        </div>
      </div>
      </div>
      <div class="d-flex justify-content-center w-100 p-3">
        <div class="card mb-3 shadow-sm p-3 mb-5 bg-body-tertiary rounded">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="aboutUs3.jpg" class="img-fluid rounded-start" alt="..." style="border-radius: 6px;">
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title"><i class="fa-solid fa-users"></i> Our Team:</h5>
                <p class="card-text">Behind every great hotel is a team of dedicated professionals, we are proud to have some of the best in the industry. From our chefs who create culinary masterpieces to our concierge team who goes above and beyond to fulfill your every request, every member of our team is committed to making your stay truly memorable.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    <br id="availability" >
    <br>
    <br>
    <h3 style="text-align: center;">Our Rooms</h3>
    <br>
    <% let imageNumber = 1; %>
    <% let roomNumber = 0; %>
    <% let currentRoomId; %>
    <% for (let i = 0; i < rooms.length; i += 3) { %>
    <div class="row row-cols-1 row-cols-md-3 g-4">
      <% for (let j = i; j < i + 3 && j < rooms.length; j++) { %>
        <% let currentRoomId = rooms[j].Roomid; %>
        <div class="col">
          <br>
          <div class="card shadow p-3 mb-5 bg-body-tertiary rounded h-100" style="margin-bottom: 10px;">
            <img src="room<%= imageNumber %>.jpg" style="height: 275px;" class="card-img-top" alt="...">
            <% imageNumber++; %>
            <% roomNumber++; %>
            <div class="card-body">
              <% if (rooms[j].Roomtype === 'Deluxe Room') { %>
                <h5 class="card-title text-dark"><i class="fa-solid fa-hotel"></i> Deluxe Room <%= roomNumber %></h5>
              <% } else if (rooms[j].Roomtype === 'Family Room') { %>
                <h5 class="card-title text-success"><i class="fa-solid fa-shop"></i> Family Room <%= roomNumber %></h5>
              <% } else { %>
                <h5 class="card-title text-primary"><i class="fa-solid fa-landmark"></i> Villa <%= roomNumber %></h5>
              <% } %>

              <% if (roomNumber > 2) { %>
                <% roomNumber = 0; %>
              <% } %> 
        
              <% if (rooms[j].Roomtype === 'Deluxe Room') { %>
                <p class="card-text">A deluxe hotel room offers a step above the standard accommodation options, making it an upgraded experience. If you book a deluxe room, you can expect larger and more tastefully designed spaces, often nicer furnishings, premium bedding, a more elaborate seating area or extra features like a tub or fireplace</p>
              <% } else if (rooms[j].Roomtype === 'Family Room') { %>
                <p class="card-text">A Family Room is normally refers to a Double bed with an additional sofa bed or camp bed. Hotels with family rooms cater to guests with children, offering spacious accommodations with additional amenities. These rooms often feature separate areas or extra beds, like bunk beds, to accommodate more kids.</p>
              <% } else { %>
                <p class="card-text">Our hotel offers more than just standard rooms and suites for those seeking a unique or elaborate stay. Villas are standalone accommodations with extra square footage, full kitchens, laundry facilities, and other amenities, perfect for large groups or those wanting more space and extended stays.</p>
              <% } %>
              <div>
                <div class="row">
                  <div class="col">
              <h6>Price <i class="fa-solid fa-dollar-sign"></i>: <%= rooms[j].Price %> /night</h6>
              <h6>Room Number <i class="fa-solid fa-hashtag"></i>: <%= rooms[j].Roomid %></h6>
              <!-- Button trigger modal -->
<button type="button" class="btn btn-primary book-now" data-bs-toggle="modal" data-bs-target="#exampleModal1" data-roomid="<%= rooms[j].Roomid %>">
  Book Now
</button>
</div>
<div class="col">
  <h6>Amenities <i class="fa-solid fa-kitchen-set"></i>:</h6>
  <% if (amenities[j] && amenities[j].length > 0) { %>
    <ul>
      <% for (let k = 0; k < amenities[j].length; k++) { %>
        <li><%= amenities[j][k].amenity_name %></li>
      <% } %>
    </ul>
  <% } else { %>
    <p>No amenities available for this room.</p>
  <% } %>
</div>
</div>
</div>
            </div>
          </div>
        </div>
        <% } %>
      </div>
      <br>
      <% } %>
     <!-- Modal -->
     <div class="modal fade " id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Enter your details:</h1>
            <!-- <% if (typeof error !== 'undefined') { %>
              <div class="alert alert-danger" role="alert">
                <%= error %>
              </div>
            <% } %>  -->
            <!-- <% if (error) { %>
              <input type="hidden" id="error" value="<%= error %>">
          <% } %>
            <% if (error) { %>
              <p style="color: red;"><%= error %></p>
          <% } else { %>
              <p style="color: green;">Room Booked</p>
          <% } %>            -->
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form class="row g-3" id="booking" action="/book" method="POST">
              <input type="hidden" id="roomId" name="roomId" value="<%= currentRoomId %>">
              <div class="col-md-3">
              <label for="checkInDate" class="form-label">Check-in Date <i class="fa-solid fa-check"></i>:</label>
              </div>
              <div class="col-md-3">
              <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>
              </div>
              <div class="col-md-3">
              <label for="checkOutDate" class="form-label">Check-out Date <i class="fa-solid fa-xmark"></i>:</label>
              </div>
              <div class="col-md-3">
              <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>
              </div>
              <div class="col-md-3">
                <label for="numberOfPeople" class="form-label">Number of People <i class="fa-solid fa-people-group"></i> :</label>
              </div>
              <div class="col-md-3">
                <input type="number" class="form-control" id="numberOfPeople" name="numberOfPeople" min=1 required>
              </div>
              <div class="col-md-3">
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" name="breakfastPreference">
                <label class="form-check-label" for="flexSwitchCheckDefault">Breakfast <i class="fa-solid fa-utensils"></i></label>
              </div>
              </div>
              <div class="col-md-3">
              <select class="form-select" aria-label="Default select example" name="paymentMode">
                <option selected>Select Payment Mode<i class="fa-solid fa-credit-card"></i></option>
                <option value="Credit Card">Credit Card</option>
                <option value="Debit Card">Debit Card</option>
                <option value="Cash">Cash</option>
              </select>
              </div>
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary" onclick="bookRoom()">Book Room</button>
          </div>
        </form>
        </div>
      </div>
    </div>
      
      <br>
      <% if (avgRating == 5) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></h4>
      <% } else if (avgRating >= 4.5 && avgRating < 5) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i></h4>
      <% } else if (avgRating >= 4 && avgRating < 4.5) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } else if (avgRating >= 3.5 && avgRating < 4) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i><i class="fa-regular fa-star"></i></h4>
      <% } else if (avgRating >= 3 && avgRating < 3.5) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } else if (avgRating >= 2.5 && avgRating < 3) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } else if (avgRating >= 2 && avgRating < 2.5) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } else if (avgRating >= 1.5 && avgRating < 2) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-regular fa-star-half-stroke"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } else if (avgRating >= 1 && avgRating < 1.5) { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } else { %>
        <h4 style="text-align: center;">Our Rating: <i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></h4>
      <% } %>
      
      <br>
      <br>
      <br>
      <br>
    </div>
    <footer class="fixed-bottom" style="color: white;
    background-color: rgb(69, 59, 59);
    text-align: center;
    left: 0;
    bottom: 0;
    width: 100%;
    margin: 0%;">
        <h5>Follow Us On <a href="#"><i class="fa-brands fa-facebook"></i></a> <a href="#"><i class="fa-brands fa-instagram"></i></a> <a href="#"><i class="fa-brands fa-youtube"></i></a> <a href="#"><i class="fa-brands fa-twitter"></i></a> <a href="#"><i class="fa-brands fa-linkedin"></i></a></h5>
              
        <p>&copy; 2024 Room Booking. All rights reserved.</p>
    </footer>
    <script>
      function bookRoom() {
        let currentRoomId = document.querySelector('#roomId').value;
        // Perform any additional actions before submitting the form, if needed
      }
    
      document.querySelectorAll('.book-now').forEach(btn => {
        btn.addEventListener('click', function() {
          let roomId = this.getAttribute('data-roomid');
          document.querySelector('#roomId').value = roomId;
        });
      });
    </script>
    <script>
      var currentDate = new Date();
      var nextDay = new Date(currentDate);
      nextDay.setDate(nextDay.getDate() + 1);
      
      document.getElementById('checkInDate').min = currentDate.toISOString().split('T')[0];
      document.getElementById('checkOutDate').min = nextDay.toISOString().split('T')[0];
      
      // Add an event listener to check-in date to update the minimum check-out date
      document.getElementById('checkInDate').addEventListener('input', function () {
      var checkOutMinDate = new Date(this.value);
      checkOutMinDate.setDate(checkOutMinDate.getDate() + 1);
      document.getElementById('checkOutDate').min = checkOutMinDate.toISOString().split('T')[0];
      });
      
            //addition
      //       document.getElementById('booking').addEventListener('submit', function (event) {
      // // event.preventDefault(); // Prevent the default form submission
      
      // // const name = document.getElementById('name').value;
      // const confirmationMessage = `Thank you! You have booked a room.`;
      // alert(confirmationMessage);
      // });
    //   document.getElementById('booking').addEventListener('submit', function(event) {
    // const error = document.getElementById('error');
    // if (error && error.value) {
    //     event.preventDefault(); // prevent form submission if there is an error
    //     alert(error.value);
    // }else{
    //   alert("Thank you! You have booked a room.")
    // }
    // });
    </script>
    <script>
      function validateForm() {
        const checkInDate = document.getElementById('checkInDate').value;
        const checkOutDate = document.getElementById('checkOutDate').value;
        const numberOfPeople = document.getElementById('numberOfPeople').value;
        const paymentMode = document.getElementById('paymentMode').value;
      
        if (checkInDate === '' || checkOutDate === '' || numberOfPeople === '' || paymentMode === 'Select Payment Mode') {
          alert('Please fill out all fields.');
          return false;
        } else{
          alert("Thank you! You have booked a room.");
          return true;
        }
      }
    </script>
    <script>
      const myModal = document.getElementById('myModal')
const myInput = document.getElementById('myInput')

myModal.addEventListener('shown.bs.modal', () => {
  myInput.focus()
})
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>